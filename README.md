Ako treba dropat bazu, cak mislim da nece iz nekog razloga se brisu podaci nekad(ovo je lose treba ispravit).
```
docker compose exec database psql -U myuser -d mydatabase
mydatabase=# 
mydatabase=# DELETE FROM cityroutes;
mydatabase=# DELETE FROM routes;
mydatabase=# DELETE FROM cities;
```
City upload radi, route upload radi. Nece relaciju izmedu. Kod uploada routes treba se povezat sa city routes. Kreiranje rute updatea start i end city, kreiranje city samo dodaje u bazu. Zasad treba frontend forma za dodavanje rute(pogledaj csv za podatke koji idu u bazu). API ne radi skroz ispravno(relacija city routes) ali trebala bi moc poslat vrijednosti pa se samo nece spremit ispravno. Treba nam **route index(tablica prikaz svega iz baze), route new(dropdown start city i end city, int input mileage), route edit(isto kao new), route delete, route show(sta god oces samo da je sve prikazano)**, pls nemoj skidat nugete random jer treba u dockerfile, ako dodajes tu ide(blazorise ima dobre komponente to je drugi produjekt repo mogu te i na taj dodat).
```
# Add EF Core tools to PATH
ENV PATH="${PATH}:/root/.dotnet/tools"

RUN dotnet add package Npgsql --version 7.0.0
RUN dotnet add package RabbitMQ.Client --version 6.8.1
RUN dotnet add package Newtonsoft.Json --version 13.0.3
RUN dotnet add package Microsoft.EntityFrameworkCore --version 7.0.8
RUN dotnet add package Microsoft.EntityFrameworkCore.Design --version 7.0.8
RUN dotnet add package Npgsql.EntityFrameworkCore.PostgreSQL --version 7.0.0
RUN dotnet add package CsvHelper --version 27.1.1

# Build the application
RUN dotnet build -c Release -o out
```
Nakon svake promijene build, mozda ne treba no cache parametar pa ce bit malo brze. Mozes cisti html pisat, nisam sigurna ni da trebamo imat sucelje al ce nama bit lakse dodavat. **Id nije autoincrement ni autogenerated.Sredit cu to zasad stavi brojeve vece od 200 za testiranje mislim da ide do 150 u uploadu.**
Kad napravis routes, treba i prikaz gradova **city index i city show page**, mislim da cemo pustit samo gradove koji su uploadani preko csv-a da ne treba crud za to(na apiju postoji crud jer sam copy paste samo da se nade ako treba).

**Starting the project**
```
docker compose build --no-cache
docker compose up -d
```
**Endpoints**
Blazor - localhost:8081
API - localhost:8082
- for development UI -> localhost:8082/swagger

**Check DB for tables**
```
docker compose exec database psql -U myuser -d mydatabase

##### IN DB SHELL(shows all tables)
\dt
```
expected output
```
docker compose exec database psql -U myuser -d mydatabase
psql (16.1 (Debian 16.1-1.pgdg120+1))
Type "help" for help.

mydatabase=# \dt
          List of relations
 Schema |    Name    | Type  | Owner  
--------+------------+-------+--------
 public | cities     | table | myuser
 public | cityroutes | table | myuser
 public | routes     | table | myuser
(3 rows)

mydatabase=# 
```
if there are no tables, execute first_migration.sql

**Executing first migration**
```
docker compose exec database psql -U myuser -d mydatabase -f /docker-entrypoint-initdb.d/first_migration.sql
```
command for executing migrations is
```
docker compose exec database psql -U myuser -d mydatabase -f /docker-entrypoint-initdb.d/MIGRATION_NAME.sql
```

  
**CSV structure**
```
StartDestination,EndDestination,Mileage
CityA,CityB,100
CityA,CityC,150
CityB,CityC,75
```
mislim da nece radit migracije jos
